<!DOCTYPE html>
<html>



<!-- Mirrored from easebuzz.in/pay/Vanisree by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 Nov 2018 11:11:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Easebuzz: Pay Vanisree.K.S</title>
    <meta name="title" content="Easebuzz: Pay Vanisree.K.S">
    <meta name="description" content="Pay directly to Vanisree.K.S using any payment mode. Make payment online immediately without any hassles.">
    <link rel="icon" type="image/png"  href="../static/base/favicon/eb-favicon.png">
    <link type="text/css" rel="stylesheet" href="../static/merchant/css/bundle_merchant.css">
    <!-- <link type="text/css" rel="stylesheet" href="/static/base/css/semantic.min.css"> -->
    <!-- <link rel="stylesheet/less" type="text/css" href="/static/merchant/less/application.less" /> -->
    <link type="text/css" rel="stylesheet" href="../static/base/css/custom/easepay.css">
    <!-- <link type="text/css" rel="stylesheet" href="/static/base/css/messenger.css"> -->
    <script src="../static/merchant/js/angular.js"></script>
    <script>
        function showLoader(container) {
            if (!container) {
                $('#screen_loader').fadeIn();
            }
            else {
                var loader_html = $('#any_loader').html()
                var container_position = $(container).css('position')
                var container_height = $(container).height()
                $(container).css({ 'position': 'relative' })
                $(container).prepend(loader_html);
                $(container).attr('data-position', container_position);
                $(container).find('.loader_div').css({ 'height': container_height }).fadeIn()
            }

        }

        function hideLoader(container) {
            if (!container) {
                $('#screen_loader').fadeOut();
            }
            else {
                var container_position = $(container).attr('data-position');
                $(container).find('.loader_div').fadeOut().remove()
                $(container).attr('position', container_position);

            }

        }
    </script>
</head>
<style>
    [ng\:cloak],
    [ng-cloak],
    [data-ng-cloak],
    [x-ng-cloak],
    .ng-cloak,
    .x-ng-cloak,
    .ng-hide:not(.ng-hide-animate) {
        display: none !important;
    }
</style>

<body id="application-base">
    <div id="easepay-container" class="ui ng-cloak" ngCloak ng-app='easepayApp' ng-controller="EasepayController as ec" ng-init="initValues()">
        <div class="ui dark-background easepay-main-div">
            <div class="ui centered padded grid">
                <div class="sixteen wide mobile six wide computer column">
                    <div class="ui container easepayform-div my-loader">
                        <div ng-if="!app_loaded" class="loader_div" style="position:absolute;top:0;width:100%;z-index:200;display:none">
                            <div class="ui segment" style="height:70%; background-color:rgba(255,255,255, 0.5)">
                                <div class="ui active dimmer">
                                    <div class="ui large text loader">Loading</div>
                                </div>
                            </div>
                        </div>
                        <div class="ui form">
                            <div class="ui segments easepay-inner-div">
                                <form class="ui form" id="easepayForm1" name="easepayForm1" ng-submit="submitForm()" novalidate>
                                    <div class="ui padded grid row">
                                        <div class="four wide column">
                                            <img class="ui tiny image" width='100px' id="userimage" ng-src="{[{ imageSrc }]}" onerror="this.src='../static/merchant/images/default_user.png';">
                                        </div>
                                        <div class="twelve wide column">
                                            <div class="ui grid">
                                                <div class="row">
                                                    <div class="column">
                                                        <h2 class="capitalize merchant_name">Vanisree.K.S</h2>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="ten wide column">
                                                        <span class="amount-pay"><span style="vertical-align:sub;"><i class="rupee icon"></i>{[{ easepayData.amount }]} &nbsp;</span></span>
                                                    </div>
                                                    <div class="six wide right aligned column">
                                                        <button type="button" class="valign mini ui button highlight-button edit-button" style="cursor:pointer" ng-click="editAmount()" ng-show="prefilled && payment_type!='quickpay'">
                                                            <i class="edit icon"></i>
                                                            Edit
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ui segment" ng-show="false">
                                        <div class="ui grid">
                                            <div class="sixteen wide mobile four wide computer column label middle aligned content"><label class="error_details" for="id_user_name">Pay to</label></div>
                                            <div class="sixteen wide mobile ten wide computer column middle aligned content">
                                                <div class="ui input">
                                                    <input class="validate" id="id_user_name" name="user_name" placeholder="Enter Name" type="text" ng-model="easepayData.userName">
                                                </div>
                                            </div>
                                            <div class="one wide computer only column"></div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="!prefilled && payment_type!='quickpay'">
                                        <div class="ui segment column">
                                            <div class="field">
                                                <label class="error_details" for="id_amount">Amount</label>
                                                <input ng-blur="approveAmount()" ng-required="true" id="id_amount" name="amount" placeholder="Enter Amount" type="number"
                                                ng-model="easepayData.amount">
                                                <div ng-show="clickedNext || easepayForm1.amount.$touched || amountFailed">
                                                    <div class="ui pointing red basic label" ng-show="easepayForm1.amount.$error.required || showServerMessage || amountFailed">
                                                        <span ng-if="!showServerMessage">Please enter valid amount to pay</span><span
                                                            ng-if="showServerMessage">{[{easepayForm1.amount.$error.serverMessage}]}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="step1">
                                        <div class="ui segment column">
                                            <div class="field">
                                                <label class="error_details" for="id_payer">Name</label>
                                                <input ng-required="true" id="id_payer" ng-model="easepayData.payer" name="payer" placeholder="Enter Your Name" type="text"
                                                />
                                                <div ng-show="clickedNext || easepayForm1.payer.$touched">
                                                    <div class="ui pointing red basic label" ng-show="easepayForm1.payer.$error.required || showServerMessage">
                                                        <span ng-if="!showServerMessage">Please enter a value</span>
                                                        <span ng-if="showServerMessage">{[{easepayForm1.payer.$error.serverMessage}]}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="step1">
                                        <div class="ui segment column">
                                            <div class="ui field">
                                                <label class="error_details" for="id_email">Email</label>
                                                <input ng-required="true" ng-class="{'error': easepayForm1.email.$error.required}" id="id_email" name="email" placeholder="Enter Your email"
                                                    type="email" ng-model="easepayData.email" />
                                                <div ng-show="clickedNext || easepayForm1.email.$touched">
                                                    <div class="ui pointing red basic label" ng-show="easepayForm1.email.$error.required || showServerMessage">
                                                        <span ng-if="!showServerMessage">Please enter a value</span><span
                                                            ng-if="showServerMessage">{[{easepayForm1.email.$error.serverMessage}]}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="step1">
                                        <div class="ui segment column">
                                            <div class="field">
                                                <label class="error_details" for="id_phone">Phone</label>
                                                <input ng-required="true" id="id_phone" maxlength="15" minlength="10" name="phone" ng-model="easepayData.phone" placeholder="Enter phone number"
                                                    type="text" ng-pattern="/\+?[0-9 ]{10,15}/" />
                                                <div ng-show="clickedNext || easepayForm1.phone.$touched">
                                                    <div class="ui pointing red basic label" ng-show="easepayForm1.phone.$error.required || showServerMessage || easepayForm1.phone.$error.pattern">
                                                        <span ng-if="!showServerMessage">Please enter a valid phone number</span><span
                                                            ng-if="showServerMessage && easepayForm1.phone.$error">{[{easepayForm1.phone.$error.serverMessage}]}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" ng-show="step1">
                                        <div class="ui segment column">
                                            <div class="field">
                                                <label class="error_details" for="id_reason">Purpose of payment</label>
                                                <textarea ng-required="true" cols="40" id="id_reason" name="reason" placeholder="Enter a reason" ng-model="easepayData.reason"
                                                rows="3">Merchant Requested
                                                </textarea>
                                                <div ng-show="clickedNext || easepayForm1.reason.$touched">
                                                    <div class="ui pointing red basic label" ng-show="easepayForm1.reason.$error.required || showServerMessage">
                                                        <span ng-if="!showServerMessage">Please enter a value</span><span
                                                            ng-if="showServerMessage">{[{easepayForm1.reason.$error.serverMessage}]}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="step1">
                                        <div class="ui segment column">
                                            <div class="field">
                                                <div class="ui checked checkbox">
                                                  <input type="checkbox" id="save_detail" ng-init="save_details=true" ng-model="save_details"/>
                                                  <label>Save my details</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                                <form class="ui form" id="easepayForm2" name="easepayForm2" ng-submit="submitForm()" novalidate>
                                    <div class="ui" ng-repeat="field in easepayData.extraFields" ng-show="step2">
                                        <div class="ui" ng-if="field.type != 'Note'">
                                            <div class="row">
                                            <div class="ui segment column">
                                                <div class="field" ng-class="{'required': field.validations.required}">
                                                    <label class="error_details" for="">{[{ field.label }]}</label>
                                                    <input ng-if="field.type == 'TextField'" name="easepay_{[{ field.id }]}" type="text" ng-model="field.value" ng-required="field.validations.required.value">
                                                    <textarea rows="2" ng-if="field.type == 'TextArea'" name="easepay_{[{ field.id }]}" ng-model="field.value" ng-required="field.validations.required.value"></textarea>
                                                    <select ng-if="field.type == 'ChoiceField'" name="easepay_{[{ field.id }]}" ng-model="field.value" ng-required="field.validations.required.value">
                                                        <option ng-repeat="option in field.options" ng-value="option.value">{[{ option.label }]}</option>
                                                    </select>
                                                    <div ng-show="clickedPay || easepayForm2.easepay_{[{ field.id }]}.$touched">
                                                        <div class="ui pointing red basic label" ng-show="easepayForm2.easepay_{[{ field.id }]}.$error.required">
                                                            {[{ field.validations.required.prompt }]}
                                                        </div>
                                                    </div>
                                                    <div class="messages easepay_{[{ field.id }]}" style="display:none;" ng-show="!easepayForm2.easepay_{[{ field.id }]}.$error.required">
                                                        <span class="error-messages ui pointing red basic label" data-for="easepay_{[{ field.id }]}"></span>
                                                    </div>

                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ui segment" ng-if="note">
                                        <div class="ui grid">
                                            <div class="column">
                                                <span style="font-size:0.8rem;color:red">* {[{ note }]}</span>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="ui">
                                        <div class="ui segment column">
                                            <button ng-if="hasNext" type="button" ng-click="nextForm()" ng-show="step1" style="width:100%" class="medium ui button highlight-button">Next</button>
                                            <button type="button" ng-click="previousForm()" ng-show="step2" style="width:100%;margin-bottom:10px" class="medium ui button secondary-button">Go Back</button>
                                            <button type="button" ng-click="submitForm()" ng-show="step2 || !hasNext" style="width:100%" ng-class="{'medium ui button highlight-button': true, 'loading':paying}">Pay</button>
                                        </div>
                                    </div>
                                    
                                    <div class="ui segment">
                                        <div class="ui grid">
                                            <div class="center aligned column" style="font-size : 10px;display:none;">
                                                <b>Merchant Category:</b> GENERAL MERCHANDISE
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="ui segment">
                                        <div class="ui two column grid">
                                            <div class="column">
                                                <a href="https://s3-ap-southeast-1.amazonaws.com/easebuzz/easebuzz.in/pci_dss/pci_dss.pdf" target="_blank">
                                                    <img src="../static/base/images/pcidss.png" style="width:17%;margin-right:1%;margin-left:10%" alt=""></a>
                                                <img src="../static/base/images/128-bit-ssl.png" style="width:17%;margin-right:1%" class="" alt="">
                                                <img src="../static/base/images/comodo-secure-icon.png" style="width:17%;margin-right:1%" class="img-responsive" alt="">
                                            </div>
                                            <div class="column">
                                                <img src="../../pay.easebuzz.in/static/gateway/images/certificates/poweredbyeasebuzz.png" style="width:70%" class="img-responsive"
                                                    alt="">
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../static/merchant/js/bundle_merchant.js"></script>
    <!--
            <script src="/static/merchant/js/less.js"></script>
    <script src="/static/merchant/js/jquery-2.2.0.min.js"></script>
    <script src="/static/base/js/semantic.min.js"></script>
    <script src="/static/base/js/messenger.js"></script>

     -->
    <script>
       $(document).ready(function () {

           Messenger.options = {
               extraClasses: 'messenger-fixed messenger-on-top messenger-on-right',
               theme: 'flat'
           }
       })
    </script>
    <script>
        var mediaurl = '../media/index.html'
        var app = angular.module('easepayApp', [], function ($interpolateProvider) {
            $interpolateProvider.startSymbol('{[{');
            $interpolateProvider.endSymbol('}]}');
        }).controller('EasepayController', ['$scope', '$http', '$parse', function ($scope, $http, $parse) {

            $scope.initValues = function () {
                showLoader('#easepay-container')
                console.log('Loader shown')
            }
            var reason = ``
            $scope.easepayData = {
                'userName': 'Vanisree',
                'amount': 0,
                'payer':'',
                'email':'',
                'phone':'',
                'reason':reason
               }
            
            try{
                var payer_details = JSON.parse(localStorage.getItem('easepay_payer'));
                if(payer_details){
                    $scope.easepayData.payer = payer_details.payer;
                    $scope.easepayData.email = payer_details.payer_email;
                    $scope.easepayData.phone = payer_details.payer_phone;
                }
            }catch(err){
                console.log("Error in loading payer details:" + err);
            }
            

        if ($scope.easepayData['amount'] == 0) {
            $scope.easepayData['amount'] = '';
        }
        $scope.prefilled = false
        $scope.payment_type = "easepay"

        $scope.step1 = true;
        $scope.buttonText = 'Pay'
        $scope.clickedNext = false
        $scope.clickedPay = false

        $scope.app_loaded = false;


        $http({
            method: 'POST',
            url: '/verifyUserName/',
            data: "value=" + encodeURIComponent($scope.easepayData['userName']) + "&csrfmiddlewaretoken=" + encodeURIComponent("nXVdQKj3XeDr0yoTQnMAjTsaSQlGM8Ez"),
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' }  // set the headers so angular passing info as form data (not request payload)
        }).success(function (response) {
            $scope.app_loaded = true;
            data = response.result
            if ($scope.payment_type != "quickpay")
            {
                $scope.easepayData.reason = data.purpose
            }
            if (data.hasOwnProperty('status') && data.status) {
                $scope.imageSrc = data.image
                $scope.note = data.note
                if (data.fields.length > 0) {
                    var fields = data.fields
                    for (var key in fields) {
                        var field = fields[key]
                        if (field.type == 'ChoiceField') {
                            field.options = JSON.parse(field.values)
                        }
                        if (field.validations) {
                            try{
                                field.validations = JSON.parse(field.validations)
                                }
                                catch (e) {
                                       console.log(e);
                                    }
                        }
                    }
                    $scope.easepayData['extraFields'] = fields
                    $scope.buttonText = 'Next'
                    $scope.hasNext = true;
                }
                else {
                    $scope.buttonText = 'Pay'
                }
            }

        }).error(function () {
            $scope.app_loaded = true;
            Messenger().post({
                message: 'An error occurred, please refresh and try again!',
                type: 'error',
                showCloseButton: true
            });
        });
        $scope.editAmount = function () {
            $scope.prefilled = false
            $scope.amountFailed = false
        }
        $scope.approveAmount = function () {
            if ($scope.easepayData['amount'] == undefined || $scope.easepayData['amount'] == '' || $scope.easepayData['amount'] == 0 || $scope.easepayData['amount'] < 0) {
                $scope.amountFailed = true
                return;
            }
            $scope.prefilled = true
        }
        $scope.nextForm = function () {
            $scope.clickedNext = true
            $scope.showServerMessage = false
            if ($scope.easepayForm1.$invalid) {
                return;
            }

            if ($scope.hasNext) {
                $scope.step2 = true;
                $scope.step1 = false;
            }
        }
        $scope.previousForm = function () {
            $scope.step2 = false;
            $scope.step1 = true;
        }
        $scope.submitForm = function () {
            if (!$scope.hasNext) {
                $scope.clickedNext = true
            }
            $scope.clickedPay = true;
            //if($scope.easepayData['amount'] == undefined || $scope.easepayData['amount'] == '' || $scope.easepayData['amount'] == 0 || $scope.easepayData['amount'] < 0)
            //{
            //   $scope.amountFailed = true
            //   return;
            // }
            if ($scope.easepayForm1.$invalid || $scope.easepayForm2.$invalid) {
                return;
            }
            $scope.paying = true
            data_submit = {}
            data_submit['user_name'] = $scope.easepayData['userName']
            data_submit['payer'] = $scope.easepayData['payer']
            data_submit['amount'] = $scope.easepayData['amount']
            data_submit['email'] = $scope.easepayData['email']
            data_submit['phone'] = $scope.easepayData['phone']
            data_submit['reason'] = $scope.easepayData['reason']
            data_submit['payment_type'] = 'easepay'
            data_submit['access_key'] = 'NA'

            var field = false
            for (var key in $scope.easepayData['extraFields']) {
                field = $scope.easepayData['extraFields'][key]
                console.log(field['value'])
                data_submit['easepay_' + field['id']] = field['value']
            }
            data_submit['csrfmiddlewaretoken'] = 'nXVdQKj3XeDr0yoTQnMAjTsaSQlGM8Ez'
            $http({
                method: 'POST',
                url: "/proceedToEasePay/",
                data: '' + $.param(data_submit),
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' }  // set the headers so angular passing info as form data (not request payload)
            }).success(function (response) {
                   try{
                        if($scope.save_details){
                            payer_details = {payer: data_submit['payer'], payer_email:data_submit['email'], payer_phone:data_submit['phone']};
                            localStorage.setItem('easepay_payer' , JSON.stringify(payer_details));
                        }else{
                            localStorage.removeItem('easepay_payer');
                        }
                    }catch(err){
                        console.log("Error in storing payer details: "+err);
                    }
                if (response.status) {
                    window.location = response.url
                }
                else {
                    $scope.paying = false
                    if (response.hasOwnProperty('errors')) {
                        $scope.showServerMessage = true
                        $.each(response.errors, function (key, value) {
                            var errors = response.errors
                            var message = errors[key][0]
                            var serverMessage = $parse('easepayForm1.' + key + '.$error.serverMessage');
                            //Materialize.toast(message, 3000, 'danger')
                            //$scope.form.$setValidity(key, false, $scope.form);
                            serverMessage.assign($scope, message);
                        });
                        //Materialize.Toast("Please check the errors and try again",3000);
                    }
                    $('.error-messages').html('');
                        $('.messages').fadeOut();

                    if (response.hasOwnProperty('custom_errors')) {
                        for(var i=0; i < response.custom_errors.length; i++)
                        {
                            for(var key in response.custom_errors[i])
                            {
                                $('.error-messages[data-for='+ key +']').html(response.custom_errors[i][key]);
                                $('.messages.'+ key).fadeIn();
                            }
                        }

                        //Materialize.Toast("Please check the errors and try again",3000);
                    }
                }

            }).error(function () {
                $scope.paying = false
                $('.error-messages').html('');
                        $('.messages').fadeOut();

                Messenger().post({
                    message: 'An error occurred, please refresh and try again!',
                    type: 'error',
                    showCloseButton: true
                });
            });;

        }

        $scope.editAmount = function () {
            $scope.prefilled = false
        }



            }]);
        app.run(function ($http) {
            $http.defaults.headers.common['X-CSRFToken'] = 'nXVdQKj3XeDr0yoTQnMAjTsaSQlGM8Ez';
        });
    </script>
</body>


<!-- Mirrored from easebuzz.in/pay/Vanisree by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 Nov 2018 11:11:47 GMT -->
</html>
